# 2020.12.30 (수)

## 오늘 한 일

### 1. 나이키 글로벌 공홈 클론

#### ➤ 스크롤바 버그🐛 픽스

나이키를 보니 브라우저의 기본 스크롤바를 사용하지 않고
html, css로 만든 스크롤에 자바스크립트 로직을 입혀 인터렉션을 할 수 있게 만들어 놓았다.
일주일 동안 바닐라js로 이를 구현하느라 로직을 구상해보고 구현해보는 과정을 수 없이 반복했다.
그리고 드디어 오늘 개선에 개선을 거듭하여 사용할만한 스크롤을 구현해냈다.
뿌듯하기도 하면서, 그동안 시행착오를 격었던 코드들을 커밋해놓지 않았던 것이 상당히 아쉽기도 하다.
완벽한 코드가 아니라도 커밋을 통해 기록하는 습관을 들이자!

#### ➤ Github pages 배포

스크롤바를 완성하고 어느 정도 페이지가 갖춰진 것 같아 Github pages로 배포 해보았다.
![스크롤바 버그](https://user-images.githubusercontent.com/64844815/103358852-f4d76100-4af9-11eb-9116-217a7ddcabd2.png)
그런데 liveServer에서는 멀정히 돌아가던 로직이 배포한 페이지에서는 제대로 동작하지 않는다.😂
배포 페이지에서 스크롤바의 사이즈를 계산하고 이를 width 속성으로 적용하는 로직이 됐다가 안 됐다가 한다.. 하...
일주일을 고심해서 짠 코드인데 너무 허탈하다.
이유가 무엇일까? 허탈함이 지나가고 고민해봤다.
렌더링된 특정 요소들의 사이즈를 토대로 스크롤바의 크기를 계산하는 로직 외에는 모두 잘 동작했기 때문에
짐작하기로는 css와 js의 실행 타이밍 때문이 아닐까 싶었다.

1. DOMContentLoaded
   window에 'DOMContentLoaded'에 대한 이벤트 리스너를 설정해보았다.
   역시나.. 아무런 변화가 없다. 이벤트를 'load'로 변경해보았더니 잘 동작하는 것 같았다.
   **그런데,**
   계속 테스트 해보니 강력 새로고침을 했을 때는 사이즈 계산이 이상하게 되고,
   그 이후로 그냥 새로고침을 다시 하면 제대로 동작한다. 결국 스크립트의 실행 타이밍 문제가 아니었다.

2. defer
   실행 타이밍 문제인 줄 알고 script 태그의 async와 defer 속성도 다시 찾아봤다.
   하지만 대반전으로 이 문제는 아니었다...

3. Overrides
   개발 시에 문제가 없다가 Github pages에 배포한 후에 이슈가 생긴 것이므로 코드 수정하고 테스트라기 위해서는 계속해서 커밋과 푸쉬를 남발해야만 했다. 커밋이 지저분해질 것 같아 방법을 찾아보았다. 크롬 개발자 도구의 Overrides를 이용하면 새로고침을 해도 개발자 도구에서 수정한 코드가 날아가지 않는다는 것을 알게 되었다.

4. 동적 추가
   기존에는 html에서 스크롤바를 마크업 해놓고, 자바스크립트에서 컨텐츠의 양에 따라 동적으로 width 값을 바꿔주도록 구현했었다. 이 과정에서 문제가 생기나 싶어 아예 스크롤바 요소를 createElement, setAttribute, appendChild를 통해 만들고 width 값까지 계산한 이후에 DOM에 추가 해주는 과정 전체를 동적인 방식으로 변경해보았다. 그러나 해결되지 않았다.

##### 😫 대체 문제가 뭐지!!

이것저것 한 참을 검색해봤지만 답은 못 찾았다..
liveServer에서는 잘 동작하니 우선 기능 구현에만 집중하느라 정신없이 쓰여진 코드를 리펙토링 하고 반응형을 구현해본 뒤에 해결해보기로 정했다.
원인을 몰라 답답하긴 했지만 그래도 이전에 공부한 개념들을 다시 찾아보면서 복습도 되었고 흥미로웠다.

### 2. Promise 비동기 처리

Youtube API를 사용하려고 fetch api를 썼다. 응답받은 데이터를 json으로 변환하는 것까지는 알겠는데,
비동기적으로 변수에 할당할 방법이 생각나지 않았다. 몇 주 전에 리액트 튜토리얼을 하면서 사용했는데도 말이다.😅
하위 컴포넌트에 props로 데이터를 전달해주려 했는데 자꾸 undefined가 나온다.
변수에 할당하는 것이 아니라 Promise.then()의 콜백에서 setState를 사용하여 state를 업데이트 해주고 그것을 핸들링하면 된다.

### 3. 마크다운 문법

TIL을 시작하면서 이전에 훑어보았던 마크다운 문법을 다 까먹어 버렸다!
어제 TIL 리드미 파일을 쓰면서 유일하게 기억나던 헤더 문법만 썼더니 가독성도 떨어지고 안 예뻤다.
그래서 드림코딩 엘리님의 유튜브를 통해 마크다운 문법을 다시 살펴보았다.

### 새로 알게된 용어

- **fuzzy search**
  초성 검색처럼 키워드를 완성하지 않고 일부만 입력해도 찾고자 하는 내용을 검색할 수 있게 해주는 기능
  ex) cls -> class

### 더 궁금한 내용

- [ ] Github repo의 Pull Request 활용
- [ ] Flavored Markdown 문법
