# 2021.1.21 (ëª©)

## useAuth

- React ìì²´ì—ëŠ” í¬í•¨ë˜ì§€ ì•Šì€ hook
- ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë“ ì§€ í˜„ì¬ auth stateë¥¼ ë°›ì•„ì˜´
- auth stateê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ re-render ì‹œì¼œ ì¤Œ
- auth ë°ì´í„°ê°€ ë‹´ê¸´ context ì˜¤ë¸Œì íŠ¸ ë°˜í™˜í•˜í•˜ëŠ” Consuming context hook

- `<ProvideAuth>`

  - ë³´í†µ app ì „ì²´ë¥¼ ê°ì‹¸ë„ë¡ í•¨
  - auth ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¦
  - useAuthë¥¼ í˜¸ì¶œí•˜ëŠ” ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ auth ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë‚´ë¶€ì ìœ¼ë¡œ React Context ì‚¬ìš©

  ```js
  export function ProvideAuth({ children }) {
    const auth = useProvideAuth();
    return <authContext.Provider value={auth}>{children}</authContext.Provider>;
  }
  ```

- `useProvideAuth`
  - auth ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ê³  ê·¸ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” Context Provider hook

> ğŸ“– [useAuth](https://usehooks.com/useAuth/)

## React Router Hooks

ë¦¬ì•¡íŠ¸ ë¼ìš°í„°ëŠ” ë¼ìš°í„°ì˜ stateì— ì ‘ê·¼í•˜ê³ ,  
ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ íƒìƒ‰ì„ í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ëª‡ ê°€ì§€ hooksë¥¼ ì œê³µí•œë‹¤.
(ë¦¬ì•¡íŠ¸ 16.8 ì´ìƒì—ì„œ ì‚¬ìš© ê°€ëŠ¥)

1.  useHistory

    - íƒìƒ‰ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” historyì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ê²Œ í•´ì£¼ëŠ” hook

    ```js
    function HomeButton() {
      let history = useHistory();

      function handleClick() {
        history.push('/home');
      }

      return (
        <button type="button" onClick={handleClick}>
          Go home
        </button>
      );
    }
    ```

    ### history

    - history, history ì˜¤ë¸Œì íŠ¸ëŠ” history íŒ¨í‚¤ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.

      - history íŒ¨í‚¤ì§€

        - JavaScriptê°€ ì‹¤í–‰ë˜ëŠ” ëª¨ë“  ê³³ì—ì„œ ì„¸ì…˜ íˆìŠ¤í† ë¦¬ë¥¼ ì‰½ê²Œ ê´€ë¦¬ í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
        - history ì˜¤ë¸Œì íŠ¸ëŠ” ë‹¤ì–‘í•œ í™˜ê²½ì˜ ì°¨ì´ë¥¼ ì¶”ìƒí™”í•˜ê³ ,  
          history ìŠ¤íƒ ê´€ë¦¬, ì„¸ì…˜ë“¤ ì‚¬ì´ì— stateë¥¼ íƒìƒ‰, ìœ ì§€í•  ìˆ˜ ìˆëŠ” minimal APIë¥¼ ì œê³µí•œë‹¤.

          > ğŸ“– [History Package](https://github.com/ReactTraining/history)

    - ë¦¬ì•¡íŠ¸ ì™¸ì— ë¦¬ì•¡íŠ¸ ë¼ìš°í„°ì˜ ì£¼ìš”í•œ 2ê°€ì§€ dependency ì¤‘ í•˜ë‚˜
    - JavaScript í™˜ê²½ì—ì„œ ì„¸ì…˜ íˆìŠ¤í† ë¦¬ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê²ƒë“¤ì„ ì œê³µ

    - history ì˜¤ë¸Œì íŠ¸ì˜ ë©”ì†Œë“œ ë° ì†ì„±

      - length: (number), íˆìŠ¤í† ë¦¬ ìŠ¤íƒ ì•ˆì— ìˆëŠ” í•­ëª© ìˆ˜
      - action: (string), í˜„ì¬ action(PUSH, REPLACE, or POP)
      - location: (object), í˜„ì¬ location
        - pathname: (string), URL ê²½ë¡œ
        - search: (string), URL ì¿¼ë¦¬ ìŠ¤íŠ¸ë§
        - hash: (string), URL í•´ì‹œ
        - state: (object), location state, ë¸Œë¼ìš°ì €ì™€ ë©”ëª¨ë¦¬ íˆìŠ¤í† ë¦¬ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥  
          (ex. push(path, state)ë¥¼ í˜¸ì¶œí–ˆìœ¼ë©´ ì—¬ê¸°ì„œ ì‚¬ìš©í•œ stateê°€ ë‹´ê¹€)
      - push(path, [state]): ìƒˆë¡œìš´ í•­ëª©ì„ íˆìŠ¤í† ë¦¬ ìŠ¤íƒì— ë„£ëŠ” ë©”ì†Œë“œ
      - replace(path, [state]): íˆìŠ¤í† ë¦¬ ìŠ¤íƒì— ìˆëŠ” í˜„ì¬ í•­ëª©ì„ ë°”ê¾¸ëŠ” ë©”ì†Œë“œ
      - go(n): në²ˆì§¸ í•­ëª©ìœ¼ë¡œ íˆìŠ¤í† ë¦¬ ìŠ¤íƒì˜ í¬ì¸í„°ë¥¼ ì´ë™ì‹œí‚¤ëŠ” ë©”ì†Œë“œ
      - goBack(): go(-1)ê³¼ ê°™ë‹¤.
      - goForward(): go(1)ê³¼ ê°™ë‹¤.
      - block(prompt): íƒìƒ‰ì„ ë§‰ìŒ

    - history ì˜¤ë¸Œì íŠ¸ëŠ” ë³€ê²½ë  ìˆ˜ ìˆë‹¤.(mutable)
      ë”°ë¼ì„œ, `history.location`ì´ ì•„ë‹ˆë¼  
      `<Route>`ì˜ render propsë¥¼ í†µí•´ locationì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.  
      ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ lifecycle ë©”ì†Œë“œì—ì„œ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.

    ```js
    class Comp extends React.Component {
      componentDidUpdate(prevProps) {
        // true
        const locationChanged = this.props.location !== prevProps.location;

        // historyê°€ ë³€ê²½ ë˜ë¯€ë¡œ í•­ìƒ falseê°€ ë‚˜ì˜¬ ê²ƒì´ë‹¤.
        const locationChanged =
          this.props.history.location !== prevProps.history.location;
      }
    }
    ```

    > ğŸ“– [history](https://reactrouter.com/web/api/history)

> ğŸ“– [useHistory](https://reactrouter.com/web/api/Hooks/usehistory)

2.  useLocation

    - í˜„ì¬ URLì„ í‘œì‹œí•˜ëŠ” location ì˜¤ë¸Œì íŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” hook
    - URLì´ ë°”ë€” ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ locationì„ ë°˜í™˜í•˜ëŠ” useStateë¼ê³  ì´í•´í•˜ë©´ ëœë‹¤.
    - í˜ì´ì§€ê°€ ë¡œë“œ ë  ë•Œ ë§ˆë‹¤ ì›¹ ë¶„ì„ë„êµ¬ë¥¼ ì‚¬ìš©í•´  
      ìƒˆë¡œìš´ 'page view' ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê³  ì‹¶ì„ ë•Œ ìœ ìš©í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤.

```js
function usePageViews() {
  let location = useLocation();
  React.useEffect(() => {
    ga.send(['pageview', location.pathname]);
  }, [location]);
}

function App() {
  usePageViews();
  return <Switch>...</Switch>;
}
```

> ğŸ˜²â“ gaê°€ ë­ì§€?

### location

- locationì€ ì§€ê¸ˆ ì•±ì´ ì–´ë”” ìˆëŠ”ì§€, ê°€ê³  ì‹¶ì€ ìœ„ì¹˜, ì´ì „ì— ë°©ë¬¸í–ˆë˜ ìœ„ì¹˜ì„ ë‚˜íƒ€ë‚¸ë‹¤.
- ë¼ìš°í„°ëŠ” location ì˜¤ë¸Œì íŠ¸ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
  - `<Route>` ì»´í¬ë„ŒíŠ¸ì— `this.location`ë¡œ
  - `<Route>` `render`ì— `({location}) => ()`
  - `<Route>` `children`ì— `({location}) => ()`
  - `withRouter`ì— `this.props.location`ìœ¼ë¡œ
- `history.location`ë„ ìˆì§€ë§Œ mutableí•˜ë¯€ë¡œ ì“°ì§€ ìºëŠ”ê²Œ ì¢‹ë‹¤.
- location ì˜¤ë¸Œì íŠ¸ëŠ” ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë¯€ë¡œ  
  lifecycle hooksì—ì„œ ìœ„ì¹˜ ì´ë™ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼  
  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ ì• ë‹ˆë©”ì´ì…˜ í•˜ëŠ”ë° ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ë‹¤ìŒê³¼ ê°™ì€ ê³³ì— ë¬¸ìì—´ ëŒ€ì‹  locationì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  - `<Link>`ì˜ `to`
  - `<Redirect>`ì˜ `to`
  - `history.push`
  - `history.replace`
- `<Route>`, `<Switch>`ì— locationì„ ì „ë‹¬ í•  ìˆ˜ ìˆë‹¤.
-

> [location](https://reactrouter.com/web/api/location)

> ğŸ“– [useLocation](https://reactrouter.com/web/api/Hooks/uselocation)

## ë” ê³µë¶€í•  ë‚´ìš©

- [ ] [history library](https://github.com/ReactTraining/history/blob/master/docs/getting-started.md)
